{% extends 'base.html.twig' %}
{% set page_title="Welcome " ~ user.userName %}
{% block body %}
<div class="row">
    <div class="section col s12">
        <h5>{{ user.userName }},</h5>
        <p>
            Your club, {{ club.name }}, has:
        </p>
        <div class="section">
            <h5>Treasury</h5>
            <p>
                ${{ available|number_format(2) }}
            </p>
        </div>
        <div class="divider"></div>
        <div class="section">
            <h5>Pending treasury:</h5>
            <p>
                ${{ pending|number_format(2) }} <sup><a href="#note">1</a></sup>
            </p>
        </div>
        <div class="divider"></div>
        {% if dues is null or dues.isCheckedOut == false %}
        <p>
            Once you've <a href="{{ path('app_due_create') }}">paid dues</a>, you'll be able to create and vote on events.
        </p>
        <p>
            <a href="{{ path('app_due_create') }}" class="btn waves-effect waves-light blue lighten-1">Pay dues</a>
        </p>
            {% else %}
                {% if events %}
                    <div class="section">
                    <h5>Events</h5>
                        {% for event in events %}
                            <ul class="collection" id="ul-event-{{ event.id }}">
                                <li class="collection-item avatar">
                                    <i class="material-icons circle teal">folder</i>
                                    <span class="title"><strong>{{ event.name[:25] ~ ' ...'  }}</strong></span>
                                    <p>
                                        Event date: {{ event.date|date('D M/d/Y') }}
                                    </p>
                                    <p>
                                        Votes yes: {{ event.voteTotal }}
                                    </p>
                                    <p>
                                        Event status: {{ event.status }}
                                    </p>
                                    <span class="secondary-content">
                                        <a href="{{ path('app_event_show', {'id': event.id}) }}" class="btn waves-effect waves-light"><i class="material-icons">thumbs_up_down</i></a>
                                        {% if user == event.owner %}
                                            <span class="hide-on-med-and-down">
                                                    <a href="{{ path('app_event_edit', {'id': event.id}) }}" class="btn waves-effect waves-light blue lighten-1"><i class="material-icons">edit</i></a>
                                                    <a data-target="delete_modal" data-href="{{ path('app_event_delete', {'id': event.id}) }}" data-id="{{ event.id }}" data-title="{{ event.name }}" class="btn waves-effect waves-light orange accent-2 delete-button"><i class="material-icons">delete_forever</i></a>
                                                </span>
                                        {% endif %}
                                    </span>
                                </li>
                            </ul>
                        {% endfor %}
                    </div>
                {% endif %}
                <a href="{{ path('app_event_create') }}" class="btn waves-effect waves-light blue lighten-1">Create new event</a>
            {% endif %}
        <p id="note">
            <sup><sup>1</sup>Charges may take around a week to clear and show in the balance.</sup>
        </p>
    </div>
</div>
{% include 'partial/delete.html.twig' %}
{% endblock %}
{% block stylesheets %}
{% endblock %}
